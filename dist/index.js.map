{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/helpers/helpers.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","export function isImage(file) {\n    const fileName = file.name || file.path;\n    const suffix = fileName.substr(fileName.indexOf('.') + 1).toLowerCase();\n    if (suffix === 'jpg' || suffix === 'jpeg' || suffix === 'bmp' || suffix === 'png') {\n        return true;\n    }\n}\n","import React from 'react';\nimport Dialog from 'material-ui/Dialog';\nimport FlatButton from 'material-ui/FlatButton';\nimport Dropzone from 'react-dropzone';\nimport ActionDelete from 'material-ui/svg-icons/content/clear';\nimport FileIcon from 'material-ui/svg-icons/editor/insert-drive-file';\nimport CloudUploadIcon from 'material-ui/svg-icons/file/cloud-upload';\nimport IconButton from 'material-ui/IconButton';\nimport Snackbar from 'material-ui/Snackbar';\nimport './index.css';\nimport {isImage} from './helpers/helpers.js';\n\nexport default class MaterialDropZone extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            open: false,\n            openSnackBar: false,\n            errorMessage: '',\n            files: this.props.files || [],\n            disabled: true,\n            acceptedFiles: this.props.acceptedFiles ||\n            ['image/jpeg', 'image/png', 'image/bmp', 'application/vnd.ms-excel',\n                'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n                'application/vnd.ms-powerpoint',\n                'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n                'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'],\n        };\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.setState({\n            open: nextProps.open,\n            files: nextProps.files,\n        });\n    }\n\n    handleClose() {\n        this.props.closeDialog();\n        this.setState({open: false});\n    }\n\n    onDrop(files) {\n        let oldFiles = this.state.files;\n        const filesLimit = this.props.filesLimit || '3';\n\n        oldFiles = oldFiles.concat(files);\n        if (oldFiles.length > filesLimit) {\n            this.setState({\n                openSnackBar: true,\n                errorMessage: 'Cannot upload more then ' + filesLimit + ' items.',\n            });\n        } else {\n            this.setState({\n                files: oldFiles,\n            }, this.changeButtonDisable);\n        }\n    }\n\n    handleRemove(file, fileIndex) {\n        const files = this.state.files;\n        // This is to prevent memory leaks.\n        window.URL.revokeObjectURL(file.preview);\n\n        files.splice(fileIndex, 1);\n        this.setState(files, this.changeButtonDisable);\n\n        if (file.path) {\n            this.props.deleteFile(file);\n        }\n    }\n\n    changeButtonDisable() {\n        if (this.state.files.length !== 0) {\n            this.setState({\n                disabled: false,\n            });\n        } else {\n            this.setState({\n                disabled: true,\n            });\n        }\n    }\n\n    saveFiles() {\n        const filesLimit = this.props.filesLimit || '3';\n\n        if (this.state.files.length > filesLimit) {\n            this.setState({\n                openSnackBar: true,\n                errorMessage: 'Cannot upload more then ' + filesLimit + ' items.',\n            });\n        } else {\n            this.props.saveFiles(this.state.files);\n        }\n    }\n\n    onDropRejected() {\n        this.setState({\n            openSnackBar: true,\n            errorMessage: 'File too big, max size is 3MB',\n        });\n    }\n\n    handleRequestCloseSnackBar = () => {\n        this.setState({\n            openSnackBar: false,\n        });\n    };\n\n    render() {\n        let img;\n        let previews = '';\n        const fileSizeLimit = this.props.maxSize || 3000000;\n\n        if (this.props.showPreviews === true) {\n            previews = this.state.files.map((file, i) => {\n                const path = file.preview || '/pic' + file.path;\n\n                if (isImage(file)) {\n                    //show image preview.\n                    img = <img className=\"smallPreviewImg\" src={path}/>;\n                } else {\n                    //Show default file image in preview.\n                    img = <FileIcon className=\"smallPreviewImg\"/>;\n                }\n\n                return (<div>\n                    <div className={'imageContainer col fileIconImg'} key={i}>\n                        {img}\n                        <div className=\"middle\">\n                            <IconButton touch={true}>\n                                <ActionDelete\n                                    className=\"removeBtn\"\n                                    onTouchTap={this.handleRemove.bind(this, file, i)}\n                                />\n                            </IconButton>\n                        </div>\n                    </div>\n                </div>);\n            });\n        }\n\n        const actions = [\n            <FlatButton\n                label={'Cancel'}\n                primary={true}\n                onTouchTap={this.handleClose.bind(this)}\n            />,\n            <FlatButton\n                label={'Submit'}\n                primary={true}\n                disabled={this.state.disabled}\n                onTouchTap={this.saveFiles.bind(this)}\n            />];\n\n        return (\n            <div>\n                <Dialog\n                    title={'Upload File'}\n                    actions={actions}\n                    modal={false}\n                    open={this.state.open}\n                    onRequestClose={this.handleClose.bind(this)}\n                    autoScrollBodyContent={true}\n                >\n                    <Dropzone\n                        accept={this.state.acceptedFiles.join(',')}\n                        onDrop={this.onDrop.bind(this)}\n                        className={'dropZone'}\n                        acceptClassName={'stripes'}\n                        rejectClassName={'rejectStripes'}\n                        onDropRejected={this.onDropRejected.bind(this)}\n                        maxSize={fileSizeLimit}\n                    >\n                        <div className={'dropzoneTextStyle'}>\n                            <p className={'dropzoneParagraph'}>{'Drag and drop an image file here or click'}</p>\n                            <br/>\n                            <CloudUploadIcon className={'uploadIconSize'}/>\n                        </div>\n                    </Dropzone>\n                    <br/>\n                    <div className=\"row\">\n                        {this.state.files.length ? <span>Preview:</span> : ''}\n                    </div>\n                    <div className=\"row\">\n                        {previews}\n                    </div>\n                </Dialog>\n                <Snackbar\n                    open={this.state.openSnackBar}\n                    message={this.state.errorMessage}\n                    autoHideDuration={4000}\n                    onRequestClose={this.handleRequestCloseSnackBar}\n                />\n            </div>\n        );\n    }\n}\n"],"names":["isImage","file","fileName","name","path","suffix","substr","indexOf","toLowerCase","MaterialDropZone","props","handleRequestCloseSnackBar","setState","state","files","acceptedFiles","nextProps","open","closeDialog","oldFiles","filesLimit","concat","length","changeButtonDisable","fileIndex","URL","revokeObjectURL","preview","splice","deleteFile","saveFiles","img","previews","fileSizeLimit","maxSize","showPreviews","map","i","handleRemove","bind","actions","handleClose","disabled","join","onDrop","onDropRejected","openSnackBar","errorMessage","React","Component"],"mappings":"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"}